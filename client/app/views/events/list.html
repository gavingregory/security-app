<div layout="column">
  <md-toolbar>
    <div class="md-toolbar-tools">
      <md-button aria-label="Go Back" ui-sref="home.dashboard">
        Go Back
      </md-button>
      <h2>
        <span>All Events</span>
      </h2>
      <span flex></span>
      <md-button class="md-fab md-mini" aria-label="Add" ui-sref="home.events.create">
        <i class="material-icons">add</i>
      </md-button>
    </div>
  </md-toolbar>

  <div class="table-responsive-vertical md-whiteframe-z1">
    <table id="table" class="table table-hover table-bordered md-caption">
      <thead>
        <tr>
          <th>
            Site
          </th>
          <th>Created</th>
          <th>
            Logged By
          </th>
          <th>
            Category
          </th>
          <th colspan="2">
            Comment
          </th>
          <th>
            Add Comment
          </th>
          <th>
            Options
          </th>
        </tr>
      </thead>
      <tbody>
        <tr ng-repeat="row in vm.events">
          <td data-title="Site"><a ui-sref="home.sites.view({site_id: row.site._id})">{{row.site.name}}</a></td>
          <td data-title="Created">{{row.createdAt}}</td>
          <td data-title="Logged By">{{row.comments[0].creator.name.first}} {{row.comments[0].creator.name.last}}</td>
          <td data-title="Category">
            <i class="material-icons" style="color: {{row.category.colour}}">lens</i>&nbsp;{{row.category.name}}
            <md-tooltip md-direction="bottom">
              {{row.category.description}}
            </md-tooltip>
          </td>
          <td data-title="Comments">
            {{row.comments[0].text}}
          </td>
          <td>
            <md-button ng-show="row.comments.length -1" class="md-fab md-mini" aria-label="View comments" ng-click="vm.showCommentsDialog($event, row)">
              +{{row.comments.length -1}}
            </md-button>
          </td>
          <td data-title="Add Comment">
            <md-button class="md-fab md-mini" aria-label="View comments" ng-click="vm.addCommentDialog($event, row)">
            <i class="material-icons">comment</i>
            </md-button>
          </td>
          <td data-title="Options">
            <div>
              <md-button ui-sref="home.events.view({event_id: row._id})"
                  title="View event"
                  aria-label="View event"
                  class="md-icon-button launch" >
                <i class="material-icons">description</i>
              </md-button>
              <md-tooltip md-direction="bottom">
                View this event
              </md-tooltip>
            </div>
            <div>
              <md-button ui-sref="home.events.edit({event_id: row._id})"
                  title="Edit event"
                  aria-label="Edit event"
                  class="md-icon-button launch" >
                <i class="material-icons">mode_edit</i>
              </md-button>
              <md-tooltip md-direction="bottom">
                Edit this event
              </md-tooltip>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

</div>
